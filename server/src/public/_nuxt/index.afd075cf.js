import{m as M,r as B,p as z,q as S,s as A,x as R,u as E,y as I,z as T,A as q,a as H,b as L,B as N,C as U,e as P,f as d,D as b,E as $,F as G,G as K,H as V,I as j,o as O,t as F}from"./entry.02760955.js";const Q=()=>null;function W(...i){var y,l,v,w,D,x,g,C;const c=typeof i[i.length-1]=="string"?i.pop():void 0;typeof i[0]!="string"&&i.unshift(c);let[a,r,t={}]=i;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");t.server=(y=t.server)!=null?y:!0,t.default=(l=t.default)!=null?l:Q,t.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),t.lazy=(w=(v=t.lazy)!=null?v:t.defer)!=null?w:!1,t.initialCache=(D=t.initialCache)!=null?D:!0,t.immediate=(x=t.immediate)!=null?x:!0;const e=M(),f=()=>(e.isHydrating||t.initialCache)&&e.payload.data[a]!==void 0;e._asyncData[a]||(e._asyncData[a]={data:B(f()?e.payload.data[a]:(C=(g=t.default)==null?void 0:g.call(t))!=null?C:null),pending:B(!f()),error:B(e.payload._errors[a]?z(e.payload._errors[a]):null)});const s={...e._asyncData[a]};s.refresh=s.execute=(o={})=>{if(e._asyncDataPromises[a]){if(o.dedupe===!1)return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}if(o._initial&&f())return e.payload.data[a];s.pending.value=!0;const _=new Promise((n,h)=>{try{n(r(e))}catch(k){h(k)}}).then(n=>{if(_.cancelled)return e._asyncDataPromises[a];t.transform&&(n=t.transform(n)),t.pick&&(n=J(n,t.pick)),s.data.value=n,s.error.value=null}).catch(n=>{var h,k;if(_.cancelled)return e._asyncDataPromises[a];s.error.value=n,s.data.value=E((k=(h=t.default)==null?void 0:h.call(t))!=null?k:null)}).finally(()=>{_.cancelled||(s.pending.value=!1,e.payload.data[a]=s.data.value,s.error.value&&(e.payload._errors[a]=z(s.error.value)),delete e._asyncDataPromises[a])});return e._asyncDataPromises[a]=_,e._asyncDataPromises[a]};const p=()=>s.refresh({_initial:!0}),m=t.server!==!1&&e.payload.serverRendered;{const o=I();if(o&&!o._nuxtOnBeforeMountCbs){o._nuxtOnBeforeMountCbs=[];const n=o._nuxtOnBeforeMountCbs;o&&(S(()=>{n.forEach(h=>{h()}),n.splice(0,n.length)}),A(()=>n.splice(0,n.length)))}m&&e.isHydrating&&a in e.payload.data?s.pending.value=!1:o&&(e.payload.serverRendered&&e.isHydrating||t.lazy)&&t.immediate?o._nuxtOnBeforeMountCbs.push(p):t.immediate&&p(),t.watch&&R(t.watch,()=>s.refresh());const _=e.hook("app:data:refresh",n=>{if(!n||n.includes(a))return s.refresh()});o&&A(_)}const u=Promise.resolve(e._asyncDataPromises[a]).then(()=>s);return Object.assign(u,s),u}function J(i,c){const a={};for(const r of c)a[r]=i[r];return a}function X(i,c,a){const[r={},t]=typeof c=="string"?[{},c]:[c,a],e=r.key||t;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+e);if(!i)throw new Error("[nuxt] [useFetch] request is missing.");const f="$f"+e,s=T(()=>{let n=i;return typeof n=="function"&&(n=n()),E(n)}),{server:p,lazy:m,default:u,transform:y,pick:l,watch:v,initialCache:w,immediate:D,...x}=r,g=q({...x,cache:typeof r.cache=="boolean"?void 0:r.cache}),C={server:p,lazy:m,default:u,transform:y,pick:l,initialCache:w,immediate:D,watch:[g,s,...v||[]]};let o;return W(f,()=>{var n;return(n=o==null?void 0:o.abort)==null||n.call(o),o=typeof AbortController<"u"?new AbortController:{},$fetch(s.value,{signal:o.signal,...g})},C)}const Y={class:"container-fluid"},Z={class:"row"},ee={class:"col-12 py-3"},te={class:"d-grid gap-3"},ae=d("span",{class:"ms-3"},"Add Object",-1),ne={class:"card-header"},se={class:"card-body"},oe={class:"card-text"},re={class:"d-flex gap-2"},ie=["onClick"],le=H({__name:"index",async setup(i){let c,a;const r=L(),{data:t,refresh:e}=([c,a]=N(()=>X("/api",{method:"GET",headers:{authorization:`Bearer ${localStorage.getItem("access_token")}`},baseURL:r.public.apiBase},"$pqtWcjQkdb")),c=await c,a(),c);U(()=>{e()});const f=B(null),s=async p=>{try{await $fetch("/api/delete",{method:"POST",body:{id:p},headers:{authorization:`Bearer ${localStorage.getItem("access_token")}`},baseURL:r.public.apiBase}),e()}catch{f.value="Something went wrong."}};return(p,m)=>{const u=j("font-awesome-icon"),y=V;return O(),P("div",Y,[d("div",Z,[d("div",ee,[d("div",te,[b(y,{to:"/create",class:"btn btn-primary"},{default:$(()=>[b(u,{icon:"fa-solid fa-plus"}),ae]),_:1}),(O(!0),P(G,null,K(E(t),l=>(O(),P("div",{key:l._id,class:"card"},[d("h5",ne,F(l.name),1),d("div",se,[d("p",oe,F(l.description),1),d("div",re,[b(y,{to:`/edit/${l._id}`,type:"button",class:"btn btn-light"},{default:$(()=>[b(u,{icon:"fa-solid fa-pen-to-square"})]),_:2},1032,["to"]),d("button",{onClick:v=>s(l._id),type:"button",class:"btn btn-light text-danger"},[b(u,{icon:"fa-solid fa-trash"})],8,ie)])])]))),128))])])])])}}});export{le as default};
