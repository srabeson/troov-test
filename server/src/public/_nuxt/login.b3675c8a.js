import{a as w,b as y,r as i,e as c,f as e,C as m,u as o,t as x,h as k,w as I,i as u,v as h,j as p,D as N,G as S,H as C,o as r,I as V,k as L,J as B}from"./entry.e6195af8.js";const R={class:"container-fluid"},T={class:"row"},j={class:"d-none d-md-block col-12 col-md-4 col-lg-6 bg-dark text-light"},D={class:"d-flex justify-content-center align-items-center h-100"},E={class:"display-1"},M={class:"col-12 col-md-8 col-lg-6 bg-light text-dark min-vh-100"},P={class:"text-center mx-md-5"},U=e("h1",{class:"mt-5 display-1"},"Login",-1),q=e("p",null,"Welcome to the object management web app",-1),G={key:0,class:"alert alert-danger mt-5 text-start",role:"alert"},O=["onSubmit"],F={class:"form-floating mb-3"},H=e("label",{for:"emailInput"},"Email address",-1),J={class:"form-floating mb-3"},W=e("label",{for:"passwordInput"},"Password",-1),$={class:"d-grid"},z={type:"submit",class:"btn btn-primary"},A={key:0,class:"spinner-border text-light",role:"status",style:{width:"1rem",height:"1rem"}},K=e("span",{class:"visually-hidden"},"Loading...",-1),Q=[K],X={key:1},Y=e("span",{class:"me-2"},"New member?",-1),te=w({__name:"login",setup(Z){const f=y(),a=i(""),n=i(""),d=i(!1),s=i(null),g=async()=>{try{s.value=null,d.value=!0;const t=await $fetch("/auth/login",{baseURL:f.public.apiBase,method:"POST",body:{username:a.value,password:n.value}});localStorage.setItem("access_token",t.access_token),await L("/")}catch(t){t instanceof B&&t.data&&t.data.error?s.value=t.data.error:s.value="Something went wrong."}finally{d.value=!1}};return(t,l)=>{const v=C("font-awesome-icon"),b=S;return r(),c("div",R,[e("div",T,[e("div",j,[e("div",D,[e("h1",E,[m(v,{icon:"fa-solid fa-right-to-bracket"})])])]),e("div",M,[e("div",P,[U,q,o(s)?(r(),c("div",G,x(o(s)),1)):k("",!0),e("form",{onSubmit:I(g,["prevent"]),class:"my-5"},[e("div",F,[u(e("input",{type:"email",class:"form-control",id:"emailInput",placeholder:"name@example.com",required:"","onUpdate:modelValue":l[0]||(l[0]=_=>p(a)?a.value=_:null)},null,512),[[h,o(a)]]),H]),e("div",J,[u(e("input",{type:"password",class:"form-control",id:"passwordInput",placeholder:"Password",required:"","onUpdate:modelValue":l[1]||(l[1]=_=>p(n)?n.value=_:null)},null,512),[[h,o(n)]]),W]),e("div",$,[e("button",z,[o(d)?(r(),c("div",A,Q)):(r(),c("span",X,"LOGIN"))])])],40,O),e("div",null,[Y,m(b,{to:"/register"},{default:N(()=>[V("Register")]),_:1})])])])])])}}});export{te as default};
