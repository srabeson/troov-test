import{a as w,b as y,r as i,e as c,f as e,D as m,u as o,t as x,h as k,w as I,i as u,v as h,j as p,E as N,H as S,I as V,o as r,J as C,k as L,K as B}from"./entry.02760955.js";const E={class:"container-fluid"},R={class:"row"},T={class:"d-none d-md-block col-12 col-md-4 col-lg-6 bg-dark text-light"},j={class:"d-flex justify-content-center align-items-center h-100"},D={class:"display-1"},M={class:"col-12 col-md-8 col-lg-6 bg-light text-dark min-vh-100"},P={class:"text-center mx-md-5"},U=e("h1",{class:"mt-5 display-1"},"Login",-1),q=e("p",null,"Welcome to the object management web app",-1),O={key:0,class:"alert alert-danger mt-5 text-start",role:"alert"},F=["onSubmit"],G={class:"form-floating mb-3"},H=e("label",{for:"emailInput"},"Email address",-1),J={class:"form-floating mb-3"},K=e("label",{for:"passwordInput"},"Password",-1),W={class:"d-grid"},$={type:"submit",class:"btn btn-primary"},z={key:0,class:"spinner-border text-light",role:"status",style:{width:"1rem",height:"1rem"}},A=e("span",{class:"visually-hidden"},"Loading...",-1),Q=[A],X={key:1},Y=e("span",{class:"me-2"},"New member?",-1),te=w({__name:"login",setup(Z){const f=y(),a=i(""),n=i(""),d=i(!1),t=i(null),g=async()=>{try{t.value=null,d.value=!0;const s=await $fetch("/auth/login",{baseURL:f.public.apiBase,method:"POST",body:{username:a.value,password:n.value}});localStorage.setItem("access_token",s.access_token),await L("/")}catch(s){s instanceof B?t.value=s.data.error:t.value="Something went wrong."}finally{d.value=!1}};return(s,l)=>{const v=V("font-awesome-icon"),b=S;return r(),c("div",E,[e("div",R,[e("div",T,[e("div",j,[e("h1",D,[m(v,{icon:"fa-solid fa-right-to-bracket"})])])]),e("div",M,[e("div",P,[U,q,o(t)?(r(),c("div",O,x(o(t)),1)):k("",!0),e("form",{onSubmit:I(g,["prevent"]),class:"my-5"},[e("div",G,[u(e("input",{type:"email",class:"form-control",id:"emailInput",placeholder:"name@example.com",required:"","onUpdate:modelValue":l[0]||(l[0]=_=>p(a)?a.value=_:null)},null,512),[[h,o(a)]]),H]),e("div",J,[u(e("input",{type:"password",class:"form-control",id:"passwordInput",placeholder:"Password",required:"","onUpdate:modelValue":l[1]||(l[1]=_=>p(n)?n.value=_:null)},null,512),[[h,o(n)]]),K]),e("div",W,[e("button",$,[o(d)?(r(),c("div",z,Q)):(r(),c("span",X,"LOGIN"))])])],40,F),e("div",null,[Y,m(b,{to:"/register"},{default:N(()=>[C("Register")]),_:1})])])])])])}}});export{te as default};
