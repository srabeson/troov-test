import{a as k,b as S,l as B,m as I,r,e as l,f as e,u as t,t as j,h as R,w as $,i as v,v as g,j as y,o as c,k as C}from"./entry.e6195af8.js";import{u as D}from"./fetch.2f6600f4.js";const T={class:"container"},E={class:"row"},U={class:"col-12"},V=e("h1",{class:"mt-5 display-1 textcenter"},"Edit object",-1),L={key:0,class:"alert alert-danger mt-5 text-start",role:"alert"},M=["onSubmit"],N={class:"form-floating mb-3"},q=e("label",{for:"nameInput"},"Name",-1),z={class:"form-floating mb-3"},G=e("label",{for:"descriptionInput"},"Description",-1),O={class:"d-grid"},A={type:"submit",class:"btn btn-primary"},F={key:0,class:"spinner-border text-light",role:"status",style:{width:"1rem",height:"1rem"}},P=e("span",{class:"visually-hidden"},"Loading...",-1),H=[P],J={key:1},X=k({__name:"[id]",async setup(K){var f,b;let s,p;const _=S(),d=B(),{data:h}=([s,p]=I(()=>D(()=>`/api/${d.params.id}`,{method:"GET",headers:{authorization:`Bearer ${localStorage.getItem("access_token")}`},baseURL:_.public.apiBase,key:`${d.params.id}`,initialCache:!1},"$gwrGx4ROu8")),s=await s,p(),s),a=r((f=h.value)==null?void 0:f.object.name),o=r((b=h.value)==null?void 0:b.object.description),u=r(!1),i=r(null),w=async()=>{try{i.value=null,u.value=!0,await $fetch("/api/edit",{method:"POST",body:{id:d.params.id,name:a.value,description:o.value},headers:{authorization:`Bearer ${localStorage.getItem("access_token")}`},baseURL:_.public.apiBase}),await C("/")}catch{i.value="Something went wrong."}finally{u.value=!1}};return(x,n)=>(c(),l("div",T,[e("div",E,[e("div",U,[V,t(i)?(c(),l("div",L,j(t(i)),1)):R("",!0),e("form",{onSubmit:$(w,["prevent"]),class:"mt-5"},[e("div",N,[v(e("input",{type:"text",class:"form-control",id:"nameInput",placeholder:"name@example.com",required:"","onUpdate:modelValue":n[0]||(n[0]=m=>y(a)?a.value=m:null)},null,512),[[g,t(a)]]),q]),e("div",z,[v(e("textarea",{class:"form-control",placeholder:"Describe the object",id:"descriptionInput",style:{height:"128px"},required:"","onUpdate:modelValue":n[1]||(n[1]=m=>y(o)?o.value=m:null)},null,512),[[g,t(o)]]),G]),e("div",O,[e("button",A,[t(u)?(c(),l("div",F,H)):(c(),l("span",J,"EDIT"))])])],40,M)])])]))}});export{X as default};
